	ORG 8000H
	DATAOUT EQU 0FFF0H
	DATAIN	EQU 0FFF1H

;WRITE TO '01111' TO DATAOUT,
;SO ONLY THE FIRST COLUMN OF KEYS
;ON THE KEYPAD ARE READ

	MOV DPTR, #DATAOUT
	MOV A, #11101111B
	MOVX @DPTR, A

LOOP:
	CALL KEYSCAN
	CALL DISPLAY
	JMP LOOP

KEYSCAN:
	MOV DPTR, #DATAIN
	MOVX A, @DPTR
	ORL A, #11100000B
	MOV R0, A
	RET

DISPLAY:
	MOV A, R0
	MOV P1, A
	RET
END